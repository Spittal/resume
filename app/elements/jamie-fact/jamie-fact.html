<dom-module id="jamie-fact">

  <link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

  <style>
    paper-material {
      border-radius: 2px;
      height: 100%;
      padding: 16px 30px 16px 30px;
      width: calc(98.66% - 16px);
      margin: 16px auto;
      background: white;
    }

    .title {
      margin: 0;
    }

    .fact-image {
      vertical-align: middle;
      display: inline-block;
      width: 100px;
      margin-right: 30px;
    }

    .fact-image img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
    }

    .fact-content {
      vertical-align: middle;
      display: inline-block;
      width: calc(100% - 140px);
    }

    @media (max-width: 950px) {
      .fact-image {
        display: block;
        width: 100px;
        margin: 20px auto;
      }

      .fact-content {
        display: block;
        width: 100%;
      }
    }
  </style>

  <template>

    <iron-ajax
      id="ajax"
      url="jamie-fact.json"
      handle-as="json"
      last-response="{{response}}"
      verbose="true">
    </iron-ajax>

    <paper-material elevation="1">
      <h4 class="center title">Random Jamie Fact!</h4>
      <div class="fact-image">
        <img src$="{{fact.factImage}}">
      </div>
      <div class="fact-content">
        <h1>{{fact.factTitle}}</h1>
        <p>{{fact.factContent}}</p>
      </div>
    </paper-material>

  </template>

  <script>
    (function() {

      Polymer({
        is: 'jamie-fact',
        getJson: function() {
          var ajax = this.$.ajax;
          ajax.generateRequest();

        },
        properties: {
          fact: {
            type: Object,
            computed: 'computeFact(response)'
          }
        },
        computeFact: function(res) {
          return res[Math.floor(Math.random() * res.length)];
        },
        attached: function() {
          this.getJson();
        }
      });

    })();
  </script>

</dom-module>
